# üñ®Ô∏è Scan2Telegram Bot

Telegram –±–æ—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å **Raspberry Pi 3** –∏ **HP Color LaserJet Pro MFP M177fw**.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- üìÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–æ–º–∞–Ω–¥–∞ `/scan` –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å
- üîß **–ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, —Ñ–æ—Ä–º–∞—Ç, —Ä–µ–∂–∏–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- üóÇÔ∏è **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞** - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- üë• **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ Chat ID
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å—Ç–∞—Ç—É—Å —Å–∫–∞–Ω–µ—Ä–∞ –∏ —Å–∏—Å—Ç–µ–º—ã
- üîÑ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** - systemd service –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Raspberry Pi 3** (–∏–ª–∏ –Ω–æ–≤–µ–µ)
- **Raspberry Pi OS** (Debian-based)
- **HP Color LaserJet Pro MFP M177fw** (–ø–æ–¥–∫–ª—é—á–µ–Ω –ø–æ USB/Wi-Fi)
- **Python 3.7+**
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –¥–ª—è Telegram API

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø—Ä–∏–Ω—Ç–µ—Ä –∫ Raspberry Pi –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
lsusb | grep HP
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository_url>
cd scan2telegram
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
chmod +x setup_raspberry_pi.sh
sudo ./setup_raspberry_pi.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º—É
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç HP –ø—Ä–∏–Ω—Ç–µ—Ä
- –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–µ—Ä–≤–∏—Å
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

#### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞:
1. –ù–∞–ø–∏—à–∏—Ç–µ **@BotFather** –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞: `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ **—Ç–æ–∫–µ–Ω**

#### –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID:
1. –ù–∞–ø–∏—à–∏—Ç–µ **@userinfobot** –≤ Telegram
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à **ID**

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
sudo nano /opt/scan2telegram/.env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_IDS=your_chat_id_here
```

### 6. –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
scan2telegram start

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
scan2telegram enable

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
scan2telegram status
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ |
| `/scan` | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| `/status` | –°—Ç–∞—Ç—É—Å —Å–∫–∞–Ω–µ—Ä–∞ –∏ —Å–∏—Å—Ç–µ–º—ã |
| `/cleanup` | –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ |
| `/help` | –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ |

### –ü—Ä–æ—Ü–µ—Å—Å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

1. –ü–æ–ª–æ–∂–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Å–∫–∞–Ω–µ—Ä
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/scan` –±–æ—Ç—É –≤ Telegram
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
4. –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (75-1200 DPI)
SCAN_DPI=300

# –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (PNG, JPEG)
SCAN_FORMAT=PNG

# –†–µ–∂–∏–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
SCAN_MODE=Color  # Color, Gray, Lineart

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ú–ë)
MAX_FILE_SIZE_MB=50
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
# –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (—á–∞—Å—ã)
CLEANUP_AFTER_HOURS=24

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–∫–∞–Ω–æ–≤
SCAN_DIR=/opt/scan2telegram/scans

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
```

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
scan2telegram start      # –ó–∞–ø—É—Å–∫
scan2telegram stop       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
scan2telegram restart    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
scan2telegram status     # –°—Ç–∞—Ç—É—Å
scan2telegram logs       # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
scan2telegram enable     # –í–∫–ª—é—á–∏—Ç—å
scan2telegram disable    # –û—Ç–∫–ª—é—á–∏—Ç—å
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
scan2telegram logs

# –§–∞–π–ª –ª–æ–≥–æ–≤
tail -f /opt/scan2telegram/scan_bot.log
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
```bash
# Systemd –∂—É—Ä–Ω–∞–ª
sudo journalctl -u scan2telegram -f

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status scan2telegram
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–∫–∞–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
scanimage -L

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ SANE
sudo systemctl restart saned

# –ü—Ä–æ–≤–µ—Ä–∫–∞ HP –¥—Ä–∞–π–≤–µ—Ä–æ–≤
hp-check
```

### –û—à–∏–±–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—ã
sudo usermod -a -G scanner,lp scanbot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
ls -la /opt/scan2telegram/
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
curl -s "https://api.telegram.org/bot${TOKEN}/getMe"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Chat ID
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```

### –û—à–∏–±–∫–∏ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
sudo rm -rf /opt/scan2telegram/.venv
sudo -u scanbot python3 -m venv /opt/scan2telegram/.venv
sudo -u scanbot bash -c "
    source /opt/scan2telegram/.venv/bin/activate
    pip install -r /opt/scan2telegram/requirements.txt
"
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
scan2telegram/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ bot.py               # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ scanner.py           # –ú–æ–¥—É–ª—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ setup_raspberry_pi.sh # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ config_example.env   # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ Chat ID** - —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ **–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** - –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤** - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –ø—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –ø–æ Wi-Fi:

```bash
# –ü–æ–∏—Å–∫ —Å–µ—Ç–µ–≤—ã—Ö —Å–∫–∞–Ω–µ—Ä–æ–≤
hp-probe -bnet

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
echo "hp:net:192.168.1.100" > ~/.sane/net.conf
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install flask

# –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
python web_monitor.py
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `scan2telegram logs`
2. **–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞**: `scan2telegram status`
3. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫–∞–Ω–µ—Ä–∞**: `scanimage -L`
4. **HP –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: `hp-check`

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è Raspberry Pi 3 + HP Color LaserJet Pro MFP M177fw**

üéØ *–ü—Ä–æ—Å—Ç–æ–µ –∏ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Telegram* 